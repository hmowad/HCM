<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:rich="http://richfaces.org/rich">
	  
    <composite:interface>
        <composite:attribute name="value" required="true"/>        
        <composite:attribute name="refuseRoles"/>        
    </composite:interface>
	
    <composite:implementation>
        <tr><td width="100%" height="15"/></tr>
        
        <tr>
            <td width="100%">
                <rich:collapsiblePanel header="#{msgs.label_prevTasks}" switchType="client" expanded="false">  
                    <table border="0" cellpadding="0" cellspacing="0" width="100%"> 
                        <ui:repeat value="#{cc.attrs.value}" var="task" varStatus="loopStatus">
                            <tr><td width="100%" height="15"/></tr>
                            
                            <tr>
                                <td width="100%">                                                                                
                                    <table class="sectionContent" border="0" cellpadding="0" cellspacing="0">
                                        <tr>
                                            <th width="15%">#{msgs.label_empNo}</th>
                                            <td width="25%">
                                                <h:outputText value="#{task.originalNumber}"/>
                                                <input type="hidden" id="prevTasks:taskRoleId:#{loopStatus.index}" name="prevTasks:taskRoleId:#{loopStatus.index}" value="#{task.assigneeWfRole}"/>                        
                                            </td>
                                            
                                            <th width="15%">#{msgs.label_name}</th>
                                            <td width="45%"><h:outputText value="#{task.originalName}"/></td>
                                        </tr>
                                        <tr>
                                            <th width="15%">
                                                <h:outputText value="#{(task.originalCategoryId == 1 or task.originalCategoryId == 2)?(msgs.label_rank):(msgs.label_personRank)}" />
                                            </th>
                                            <td width="25%"><h:outputText value="#{task.originalRankDesc}"/></td>
                                            
                                            <th width="15%">#{msgs.label_job}</th>
                                            <td width="45%"><h:outputText value="#{task.originalJobDesc}"/></td>
                                        </tr>
                                        <tr>
                                            <th width="15%">#{msgs.label_unit}</th>
                                            <td width="85%" colspan="3"><h:outputText value="#{task.originalUnitFullName}"/></td>                
                                        </tr>
                                        <tr>
                                            <th width="15%">#{msgs.label_notes}</th>
                                            <td width="85%" colspan="3"><h:outputText value="#{task.notes}"/></td>                
                                        </tr>
                                        <tr id="prevTasks:refuseReasonsId:#{loopStatus.index}">
                                            <th width="15%">#{msgs.label_refuseReasons}</th>
                                            <td width="85%" colspan="3"><h:outputText  value="#{task.refuseReasons}"/></td>
                                        </tr>
                                        <tr>
                                            <th width="15%">#{msgs.label_taskAction}</th>
                                            <td width="25%"><h:outputText value="#{task.action}"/></td>
                                            
                                            <th width="15%">#{msgs.label_taskActionDate}</th>
                                            <td width="45%"><h:outputText value="#{task.hijriActionDateString}"/></td>
                                        </tr>
                                    </table>        
                                </td>
                            </tr>
                        </ui:repeat>
                    </table>
                </rich:collapsiblePanel>
            </td>
        </tr>
        
        <script type="text/javascript">         
            controlPrevTasks('#{cc.attrs.refuseRoles}');         
        </script>
    </composite:implementation>  
</html>	  