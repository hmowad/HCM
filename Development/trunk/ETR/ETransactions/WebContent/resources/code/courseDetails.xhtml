<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:rich="http://richfaces.org/rich" xmlns:f="http://java.sun.com/jsf/core" xmlns:composite="http://java.sun.com/jsf/composite" xmlns:util="http://java.sun.com/jsf/composite/util" xmlns:code="http://java.sun.com/jsf/composite/code" xmlns:ui="http://java.sun.com/jsf/facelets">

<composite:interface componentType="com.code.ui.components.util.UIAttachments">
	<composite:attribute name="courseEvent" required="true" />
	<composite:attribute name="externalPartiesAllocation" required="true" />
	<composite:attribute name="regionsAllocations" required="true" />
	<composite:attribute name="dateHandler" required="true" />
	<composite:attribute name="saveAction" required="true" />
	<composite:attribute name="deleteEPAction" required="false" />
	<composite:attribute name="addEPAction" required="false" />
	<composite:attribute name="deleteEmpAllocationAction" required="false" />
	<composite:attribute name="addEmpAllocationAction" required="false" />
	<composite:attribute name="viewOnly" required="true" />
	<composite:attribute name="pageSize" required="false" default="15" />
	<composite:attribute name="showOneRegion" required="false" default="false" />
	<composite:attribute name="editRegionAllocation" required="false" default="false" />
	<composite:attribute name="showExternalParty" required="false" default="true" />
	<composite:attribute name="newExternalPartyId" required="false" />
	<composite:attribute name="newEmpAllocationId" required="false" />
	<composite:attribute name="selectTrainingCourseAllocation" required="false" />
	<composite:attribute name="currentRegionsAllocation" required="false" />
</composite:interface>

<composite:implementation>
	<script type="text/javascript">
	//<![CDATA[
		function getEmployee(contextPath){
			openEmpsMiniSearchByPhysicalRegionForMultipleEmployees(contextPath, 'handleEmpMiniSearhResult(ret)', 15, -1,document.getElementById('#{cc.clientId}:regionId').value);
        }

        function handleEmpMiniSearhResult(ret) {
            if (ret != null) {
                document.getElementById('#{cc.clientId}:allocationId').value = ret[0];
                document.getElementById('#{cc.clientId}:addAllocationButtonId').click();
            }
        }
		function getExternalParties() {
			openExternalPartiesMiniSearch('#{request.contextPath}', 'handleExternalPartiesMiniSearchResult(ret)',2,0);
		}
		
		function handleExternalPartiesMiniSearchResult(ret){
			if (ret != null) {
				document.getElementById('#{cc.clientId}:externalPartyHId').value = ret[0];
				document.getElementById('#{cc.clientId}:addExternalPartyBtnId').click();
			}
		}
	function validateCourseDetails () {
		// common course field validation
		if(#{cc.attrs.viewOnly})
			return true;
	    var minimumCandidatesNumber = parseInt(document.getElementById('#{cc.clientId}' +':minimumCandidatesNumberId').value);
		var maximumCandidatesNumber = parseInt(document.getElementById('#{cc.clientId}' +':maximumCandidatesNumberId').value);
		var weeksCount = parseInt(document.getElementById('#{cc.clientId}' +':weeksCountId').value);
		var coursePrequisities = document.getElementById('#{cc.clientId}' +':trainingCoursePrequisitiesId').value;
		var startDateValue =  document.getElementById('#{cc.clientId}' +':startDateId:day').value;
		var endDateValue =  document.getElementById('#{cc.clientId}' +':endDateId:day').value;
		
		if (isNaN(minimumCandidatesNumber)) {
			alert('#{msgs.error_minimumCandidatesNumberMandatory}');
			return false;
		}
		if (isNaN(maximumCandidatesNumber)) {
			alert('#{msgs.error_maximumCandidatesNumberMandatory}');
			return false;
		}
		if (isNaN(weeksCount)) {
			alert('#{msgs.error_weeksCountMandatory}');
			return false;
		}
		if (coursePrequisities == null || coursePrequisities == '') {
			alert('#{msgs.error_coursePrequisitiesMandatory}');
			return false;
		}
		if(maximumCandidatesNumber < minimumCandidatesNumber) {
			alert('#{msgs.error_minCandidatesNumGreaterThanMaxCandidatesNum}')
			return false;
		}
		if(startDateValue == 0) {
			alert('#{msgs.error_courseStartDateMandatory}');
			return false;
		}
		if(endDateValue == 0) {
			alert('#{msgs.error_courseEndDateMandatory}');
			return false;
		}
		if(minimumCandidatesNumber<=0 || minimumCandidatesNumber>99) {
			alert('#{msgs.error_minimumCandidatesNumberRange}');
			return false;
		}
		if(maximumCandidatesNumber <=0 || maximumCandidatesNumber >99) {
		    alert('#{msgs.error_maximumCandidatesNumberRange}');
			return false;
		}
		if(weeksCount  <=0 || weeksCount >52) {
		    alert('#{msgs.error_weeksCountRange}');
			return false;
		} 
		if(#{cc.attrs.courseEvent.autoGeneratedSerialFlag != 1}){
			var serialCourseNumber =  document.getElementById('#{cc.clientId}' +':courseNumber').value;
			if(serialCourseNumber==null || serialCourseNumber=='') {
			 alert('#{msgs.error_serialCourseNumberMandatory}');
				return false;
			}
		}
		return true;		
	}

	function validateExternalPartiesNeeds(cId){
		var externalPartySeatCountValue = document.getElementById(cId).value;
		if(externalPartySeatCountValue<= 0 || externalPartySeatCountValue >99)
		{
		    alert('#{msgs.error_invalidExternalPartiesSeatCountRange}');
		    document.getElementById(cId).value = '';
		}
	}

	function validateRegionsListSeatCount(cId) {
		var regionSeatsCount = document.getElementById(cId).value;
		if(regionSeatsCount<= 0 || regionSeatsCount >99)
		{
		    alert('#{msgs.error_invalidRegionSeatsCountRange}');
		    document.getElementById(cId).value = '';
		}
	}
	// ]]>
	</script>
	<!-- Common -->
	<!-- course Name -->
	<tr>
		<th width="15%">
			#{msgs.label_trainingCourseName}
			<h:outputText value=" " />
			<font style="color: red;">*</font>
		</th>
		<td width="35%">
			<h:outputText value="#{cc.attrs.courseEvent.courseName}" />
		</td>
		<td width="50%" colspan="2"></td>
	</tr>

	<!-- course Serial -->
	<tr>
		<th width="15%">
			#{msgs.label_trainingCourseNumber}
			<h:outputText value=" " />
			<font style="color: red;">*</font>
		</th>
		<td width="35%">
			<h:inputText id="courseNumber" value="#{cc.attrs.courseEvent.serial}" rendered="#{!cc.attrs.viewOnly and cc.attrs.courseEvent.autoGeneratedSerialFlag != 1}" onkeypress="return isDigit(event);" onchange="return parseInt(this.value)>0;" styleClass="inputDataNormal" maxlength="4" />
			<h:outputText value="#{cc.attrs.courseEvent.serial}" rendered="#{cc.attrs.viewOnly or cc.attrs.courseEvent.autoGeneratedSerialFlag == 1}" />
		</td>
		<!-- weeks count -->
		<th width="15%">
			#{msgs.label_weeksCount}
			<h:outputText value=" " />
			<font style="color: red;">*</font>
		</th>
		<td width="35%">
			<h:inputText id="weeksCountId" value="#{cc.attrs.courseEvent.weeksCount}" onkeypress="return isDigit(event);" onchange="return parseInt(this.value)>0;" styleClass="inputDataNormal" maxlength="2" rendered="#{!cc.attrs.viewOnly}">
				<f:ajax event="change" listener="#{cc.attrs.dateHandler}" execute="@form" render="@form" onevent="function(e){if(e.status == 'complete') unMaskScreen();}" />
			</h:inputText>
			<h:outputText value="#{cc.attrs.courseEvent.weeksCount}" rendered="#{cc.attrs.viewOnly}" />
		</td>
	</tr>

	<tr>
		<!-- start date -->
		<th width="15%">
			#{msgs.label_courseStartDate}
			<font style="color: red;"> *</font>
		</th>
		<td width="35%">
			<util:hijri id="startDateId" value="#{cc.attrs.courseEvent.plannedStartDate}" nullable="true" rendered="#{!cc.attrs.viewOnly}" listenerMethod="#{cc.attrs.dateHandler}" onChangeAjaxSubmit="true" reRenderIds="@form" onAjaxEvent="function(e){if(e.status == 'complete') unMaskScreen();}" />
			<h:outputText value="#{cc.attrs.courseEvent.plannedStartDateString}" rendered="#{cc.attrs.viewOnly}" />
		</td>
		<!-- end date -->
		<th width="15%">
			#{msgs.label_courseEndDate}
			<font style="color: red;"> *</font>
		</th>
		<td width="35%">
			<util:hijri id="endDateId" value="#{cc.attrs.courseEvent.plannedEndDate}" nullable="true" rendered="#{!cc.attrs.viewOnly}" />
			<h:outputText value="#{cc.attrs.courseEvent.plannedEndDateString}" rendered="#{cc.attrs.viewOnly}" />
		</td>
	</tr>

	<tr>
		<!-- min cand -->
		<th width="15%">
			#{msgs.label_minimumCandidatesNumber}
			<h:outputText value=" " />
			<font style="color: red;">*</font>
		</th>
		<td width="35%">
			<h:inputText id="minimumCandidatesNumberId" value="#{cc.attrs.courseEvent.candidatesMin}" onkeypress="return isDigit(event);" styleClass="inputDataNormal" maxlength="2" rendered="#{!cc.attrs.viewOnly}" />
			<h:outputText value="#{cc.attrs.courseEvent.candidatesMin}" rendered="#{cc.attrs.viewOnly}" />
		</td>
		<!-- max cand -->
		<th width="15%">
			#{msgs.label_maximumCandidatesNumber}
			<h:outputText value=" " />
			<font style="color: red;">*</font>
		</th>
		<td width="35%">
			<h:inputText id="maximumCandidatesNumberId" value="#{cc.attrs.courseEvent.candidatesMax}" onkeypress="return isDigit(event);" styleClass="inputDataNormal" maxlength="2" rendered="#{!cc.attrs.viewOnly}" />
			<h:outputText value="#{cc.attrs.courseEvent.candidatesMax}" rendered="#{cc.attrs.viewOnly}" />
		</td>
	</tr>

	<tr>
		<th width="15%">
			#{msgs.label_coursePrequisities}
			<h:outputText value=" " />
			<font style="color: red;">*</font>
		</th>
		<td width="35%">
			<h:inputTextarea id="trainingCoursePrequisitiesId" styleClass="inputDataSuperLarge" value="#{cc.attrs.courseEvent.prerquisites}" rows="3" onchange="limitMaxLength(this,'#{msgs.error_maxNumberOfCharacters}',500);" onkeyup="limitMaxLength(this,'#{msgs.error_maxNumberOfCharacters}',500);" disabled="#{cc.attrs.viewOnly}" />
		</td>
		<td width="50%" colspan="2"></td>
	</tr>

	<tr>
		<td width="100%" height="5" colspan="4" />
	</tr>

	<tr>
		<!-- List of regions  -->
		<td align="right" style="vertical-align: top" width="50%" colspan="2">
			<h:panelGroup rendered="#{ cc.attrs.regionsAllocations != null and cc.attrs.regionsAllocations.size() > 0 and !cc.attrs.showOneRegion }">
				<rich:dataTable id="regionsAllocationTableId" rowKeyVar="index" var="region" value="#{cc.attrs.regionsAllocations}" rows="#{cc.attrs.pageSize}" onrowclick="changeSelectedRowStyle(this);" onrowmouseover="changeRowOverStyle(this);" onrowmouseout="resetRowOverStyle(this);" rowClasses="gridRowOdd,gridRowEven" styleClass="gridMaster">
					<f:facet name="header">
						<rich:columnGroup>
							<rich:column colspan="2">#{msgs.label_region}</rich:column>
							<rich:column colspan="2">#{msgs.label_seats}</rich:column>
						</rich:columnGroup>
					</f:facet>
					<rich:column style="width : 5%">
						<h:commandButton action="#{cc.attrs.selectTrainingCourseAllocation}" value="#{msgs.fa_check_square}" title="#{msgs.label_select}" styleClass="btn_icon">
							<f:ajax execute="#{cc.clientId}:regionsAllocationTableId" render="#{cc.clientId}:regionsAllocationTableId #{cc.clientId}:allocationSeatsPanelId #{cc.clientId}:regionId #{cc.clientId.split(':')[0].concat(':notifyMessagesId')}" onevent="function(e){if(e.status == 'complete') unMaskScreen();}" />
						</h:commandButton>
					</rich:column>
					<rich:column style="width : 20%">
						<h:outputText value="#{region.regionShortDesc}" />
					</rich:column>
					<rich:column style="width : 20%">
						<h:selectOneRadio disabled="#{cc.attrs.viewOnly or (cc.attrs.currentRegionsAllocation == null or region.id != cc.attrs.currentRegionsAllocation.id)}" value="#{region.allocationCountFlag}">
							<f:selectItem itemLabel="#{msgs.label_count}" itemValue="true" />
							<f:selectItem itemLabel="#{msgs.label_description}" itemValue="false" />
							<f:ajax event="change" execute="#{cc.clientId}:regionsAllocationTableId" render="#{cc.clientId}:regionsAllocationTableId #{cc.clientId}:allocationSeatsPanelId" onevent="function(e){if(e.status == 'complete'){ unMaskScreen();}}" />
						</h:selectOneRadio>
					</rich:column>
					<rich:column style="width : 55%">
						<h:outputText id="regionAllocationCountId" value="#{region.allocationEmployees.size() == 0 ? '' : region.allocationEmployees.size()}" rendered="#{region.allocationCountFlag}" maxlength="2" onkeypress="return isDigit(event);" onchange="validateRegionsListSeatCount(this.id);" disabled="#{cc.attrs.viewOnly}" styleClass="inputDataSuperLarge" />
						<h:inputText id="regionAllocationDescId" value="#{region.allocationDesc}" rendered="#{!region.allocationCountFlag}" onchange="limitMaxLength(this,'#{msgs.error_maxNumberOfCharacters}',100);" onkeyup="limitMaxLength(this,'#{msgs.error_maxNumberOfCharacters}',100);" disabled="#{cc.attrs.viewOnly}" styleClass="inputDataSuperLarge" onkeypress="if (event.keyCode == 13) return false;" />
					</rich:column>
					<f:facet name="footer">
						<rich:dataScroller execute="#{cc.clientId}:regionsAllocationTableId" render="#{cc.clientId}:regionsAllocationTableId #{cc.clientId.split(':')[0].concat(':notifyMessagesId')}" fastControls="hide" oncomplete="#{rich:component('reload')}.hide()">
							<f:facet name="first">#{msgs.label_first}</f:facet>
							<f:facet name="last">#{msgs.label_last}</f:facet>
							<f:facet name="next">#{msgs.label_next}</f:facet>
							<f:facet name="previous">#{msgs.label_previous}</f:facet>
						</rich:dataScroller>
					</f:facet>
				</rich:dataTable>
			</h:panelGroup>

			<!-- one region  -->
			<h:panelGroup id="panelOneRegionAllocationId" rendered="#{ cc.attrs.regionsAllocations != null and cc.attrs.regionsAllocations.size() > 0 and cc.attrs.showOneRegion}">
				<table class="sectionTitle" style="margin-top: 0" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td colspan="2">#{msgs.label_need}</td>
					</tr>
				</table>
				<table width="100%" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td width="50%" style="vertical-align: top">
							<h:selectOneRadio disabled="#{!cc.attrs.editRegionAllocation}" id="numberOfSeatsid" value="#{cc.attrs.currentRegionsAllocation.allocationCountFlag}" layout="pageDirection">
								<f:selectItem itemLabel="#{msgs.label_numberOfSeats}" itemValue="true" />
								<f:selectItem itemLabel="#{msgs.label_descriptionOfSeats}" itemValue="false" />
								<f:ajax event="change" execute="@this" render="#{cc.clientId}:allocationSeatsPanelId #{cc.clientId}:panelOneRegionAllocationId #{cc.clientId.split(':')[0].concat(':notifyMessagesId')}" onevent="function(e){if(e.status == 'complete'){ unMaskScreen();}}" />
							</h:selectOneRadio>
						</td>
						<td width="50%">
							<table border="0" cellpadding="0" cellspacing="0">
								<tr>
									<td>
										<h:outputText id="numberOfSeatsValueId" value="#{cc.attrs.currentRegionsAllocation.allocationEmployees.size() == 0 ? '' : cc.attrs.currentRegionsAllocation.allocationEmployees.size()}" onkeypress="return isDigit(event);" styleClass="inputDataSuperLarge" maxlength="2" disabled="#{!cc.attrs.editRegionAllocation or (cc.attrs.currentRegionsAllocation.allocationCountFlag == false)}" />
									</td>
								</tr>
								<tr>
									<td>
										<h:inputTextarea id="descriptionOfSeatsValueId" styleClass="inputDataSuperLarge" value="#{cc.attrs.currentRegionsAllocation.allocationDesc}" rows="3" onchange="limitMaxLength(this,'#{msgs.error_maxNumberOfCharacters}',100);" onkeyup="limitMaxLength(this,'#{msgs.error_maxNumberOfCharacters}',100);" disabled="#{!cc.attrs.editRegionAllocation or cc.attrs.currentRegionsAllocation.allocationCountFlag == true}" onkeypress="if (event.keyCode == 13) return false;" />
									</td>
								</tr>
							</table>
						</td>
					</tr>

				</table>
			</h:panelGroup>
		</td>
		<!-- external parties  -->
		<td width="50%" colspan="2" style="vertical-align: top">
			<h:panelGroup rendered="#{cc.attrs.showExternalParty}">
				<table class="sectionTitle" style="margin-top: 0" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td colspan="2">
							<h:outputText value="#{msgs.label_externalParties}" />
							<h:outputText value=" " />
							<h:commandButton disabled="#{cc.attrs.viewOnly}" value="#{msgs.label_add}" styleClass="btn_normal" onclick="getExternalParties(); return false;" />
							<h:commandButton id="addExternalPartyBtnId" style="display:none;" action="#{cc.attrs.addEPAction}">
								<f:ajax execute="#{cc.clientId}:externalPartyHId #{cc.clientId}:externalPartiesAllocationTableId" render="#{cc.clientId}:externalPartiesAllocationTableId #{cc.clientId.split(':')[0].concat(':notifyMessagesId')}" />
							</h:commandButton>
							<h:inputHidden id="externalPartyHId" value="#{cc.attrs.newExternalPartyId}" />
						</td>
					</tr>
				</table>

				<table width="100%" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td width="100%">
							<rich:dataTable id="externalPartiesAllocationTableId" rowKeyVar="index" var="externalParty" value="#{cc.attrs.externalPartiesAllocation}" rows="#{cc.attrs.pageSize}" onrowclick="changeSelectedRowStyle(this);" onrowmouseover="changeRowOverStyle(this);" onrowmouseout="resetRowOverStyle(this);" rowClasses="gridRowOdd,gridRowEven" styleClass="gridMaster">
								<rich:column style="width : 5%">
									<f:facet name="header">#</f:facet>
									<h:outputText value="#{index + 1}" />
								</rich:column>
								<rich:column style="width : 25%">
									<f:facet name="header">#{msgs.label_party}</f:facet>
									<h:outputText value="#{externalParty.externalPartyDesc}" />
								</rich:column>
								<rich:column style="width : 15%">
									<f:facet name="header">#{msgs.label_seatsCount}</f:facet>
									<h:inputText id="externalPartySeatCountId" onchange="validateExternalPartiesNeeds(this.id);" onkeypress="return isDigit(event);" styleClass="inputDataSuperLarge" maxlength="2" disabled="#{cc.attrs.viewOnly}" value="#{externalParty.allocationCount}" />
								</rich:column>
								<rich:column style="width : 5%" rendered="#{!cc.attrs.viewOnly}">
									<f:facet name="header">#{msgs.label_delete}</f:facet>
									<h:commandButton action="#{cc.attrs.deleteEPAction}" value="#{msgs.fa_times}" onclick="return confirm('#{msgs.q_deleteAllocation}');" title="#{msgs.label_delete}" styleClass="btn_icon">
										<f:ajax execute="#{cc.clientId}:externalPartiesAllocationTableId" render="#{cc.clientId}:externalPartiesAllocationTableId #{cc.clientId.split(':')[0].concat(':notifyMessagesId')}" onevent="function(e){if(e.status == 'complete') unMaskScreen();}" />
									</h:commandButton>
								</rich:column>
								<f:facet name="footer">
									<rich:dataScroller execute="#{cc.clientId}:externalPartiesAllocationTableId" fastControls="hide" oncomplete="#{rich:component('reload')}.hide()">
										<f:facet name="first">#{msgs.label_first}</f:facet>
										<f:facet name="last">#{msgs.label_last}</f:facet>
										<f:facet name="next">#{msgs.label_next}</f:facet>
										<f:facet name="previous">#{msgs.label_previous}</f:facet>
									</rich:dataScroller>
								</f:facet>
							</rich:dataTable>
						</td>
					</tr>
				</table>
			</h:panelGroup>
		</td>
	</tr>
	<tr>
		<td width="100%" height="5" colspan="4" />
	</tr>
	<tr>
		<!-- allocation seats  -->
		<td width="50%" colspan="2">
			<h:panelGroup id="allocationSeatsPanelId">
				<h:panelGroup rendered="#{cc.attrs.regionsAllocations != null and cc.attrs.regionsAllocations.size() > 0 and cc.attrs.currentRegionsAllocation != null and cc.attrs.currentRegionsAllocation.allocationCountFlag}">
					<table class="sectionTitle" style="margin-top: 0" border="0" cellpadding="0" cellspacing="0">
						<tr>
							<td>
								<h:outputText value="#{msgs.label_selectEmp}" />
								<h:commandButton rendered="#{!cc.attrs.viewOnly or cc.attrs.editRegionAllocation}" value="#{msgs.label_add}" styleClass="btn_normal" onclick="getEmployee('#{request.contextPath}'); return false;" />
								<h:commandButton id="addAllocationButtonId" style="display:none;" action="#{cc.attrs.addEmpAllocationAction}">
									<f:ajax execute="#{cc.clientId}:allocationId" render="#{cc.clientId}:allocationTableId #{cc.clientId}:regionsAllocationTableId #{cc.clientId}:numberOfSeatsValueId #{cc.clientId.split(':')[0].concat(':notifyMessagesId')}" />
								</h:commandButton>
								<h:inputHidden id="allocationId" value="#{cc.attrs.newEmpAllocationId}" />
								<h:inputHidden id="regionId" value="#{cc.attrs.currentRegionsAllocation.regionId}" />
							</td>
						</tr>
					</table>
					<table width="100%" border="0" cellpadding="0" cellspacing="0">
						<tr>
							<td width="100%">
								<rich:dataTable id="allocationTableId" rowKeyVar="index" var="allocationEmp" value="#{cc.attrs.currentRegionsAllocation.allocationEmployees}" rows="#{cc.attrs.pageSize}" onrowclick="changeSelectedRowStyle(this);" onrowmouseover="changeRowOverStyle(this);" onrowmouseout="resetRowOverStyle(this);" rowClasses="gridRowOdd,gridRowEven" styleClass="gridMaster">
									<rich:column style="width : 5%">
										<f:facet name="header">#</f:facet>
										<h:outputText value="#{index + 1}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">#{msgs.label_name}</f:facet>
										<h:outputText value="#{allocationEmp.name}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">#{msgs.label_rank}</f:facet>
										<h:outputText value="#{allocationEmp.rankDesc}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">#{msgs.label_job}</f:facet>
										<h:outputText value="#{allocationEmp.jobDesc}" />
									</rich:column>
									<rich:column>
										<f:facet name="header">#{msgs.label_unit}</f:facet>
										<h:outputText value="#{allocationEmp.physicalUnitFullName}" />
									</rich:column>
									<rich:column rendered="#{!cc.attrs.viewOnly or cc.attrs.editRegionAllocation}">
										<h:commandButton value="#{msgs.fa_times}" action="#{cc.attrs.deleteEmpAllocationAction}" title="#{msgs.label_delete}" styleClass="btn_icon" onclick="return confirm('#{msgs.q_delete}');">
											<f:ajax render="#{cc.clientId}:allocationTableId #{cc.clientId}:regionsAllocationTableId #{cc.clientId}:numberOfSeatsValueId #{cc.clientId.split(':')[0].concat(':notifyMessagesId')}" onevent="function(e){if(e.status == 'complete') unMaskScreen();}" />
										</h:commandButton>
									</rich:column>
									<f:facet name="footer">
										<rich:dataScroller execute="#{cc.clientId}:allocationTableId" fastControls="hide" oncomplete="#{rich:component('reload')}.hide()">
											<f:facet name="first">#{msgs.label_first}</f:facet>
											<f:facet name="last">#{msgs.label_last}</f:facet>
											<f:facet name="next">#{msgs.label_next}</f:facet>
											<f:facet name="previous">#{msgs.label_previous}</f:facet>
										</rich:dataScroller>
									</f:facet>
								</rich:dataTable>
							</td>
						</tr>
					</table>
				</h:panelGroup>
			</h:panelGroup>
		</td>
	</tr>
	<tr>
		<td width="100%" colspan="4" align="center">
			<h:panelGroup id="actionsPanelId">
				<table class="actionsSection" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td width="100%" style="text-align: center">
							<h:commandButton id="saveBtnId" action="#{cc.attrs.saveAction}" value="#{msgs.label_save} &nbsp; #{msgs.fa_floppy_o}" styleClass="btn_normal_icon" onclick="return handleOnAction('#{msgs.q_save}', 'validateCourseDetails()');" rendered="#{!cc.attrs.viewOnly or cc.attrs.editRegionAllocation}" style="width:8%">
								<f:ajax execute="@form" render="@form" onevent="function(e){if(e.status == 'complete') unMaskScreen();}" />
							</h:commandButton>
						</td>
					</tr>
				</table>
			</h:panelGroup>
		</td>
	</tr>

</composite:implementation>
</html>
